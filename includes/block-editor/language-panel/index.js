(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.url,o=window.wp.apiFetch;var s=e.n(o);const a=window.wp.editPost,r=window.wp.components,i=window.wp.element,l=window.wp.data,c=window.wp.i18n,g=window.ReactJSXRuntime,d=e=>bogo.availableLanguages[e]?bogo.availableLanguages[e].name:e;(0,t.registerPlugin)("bogo-language-panel",{render:function(){const{currentPost:e,currentLocale:t}=(0,l.useSelect)(e=>{const t=e("core/editor").getCurrentPost(),n=e("core/editor").getEditedPostAttribute("meta");return{currentPost:Object.assign({},t,bogo.currentPost),currentLocale:n?._locale||bogo.currentPost.locale||""}});if(-1==bogo.localizablePostTypes.indexOf(e.type))return(0,g.jsx)(g.Fragment,{});const[n,o]=(0,i.useState)(e.translations),u=()=>{const e=Object.entries(bogo.availableLanguages).map(([e,t])=>({value:e,label:t.name||e}));return(0,g.jsxs)(r.PanelRow,{children:[(0,g.jsx)("span",{children:(0,c.__)("Language","bogo")}),(0,g.jsx)(r.SelectControl,{value:t,options:e,onChange:e=>{(0,l.dispatch)("core/editor").editPost({meta:{_locale:e}})},__nextHasNoMarginBottom:!0})]})},p=()=>{const e=[];Object.entries(n).forEach(([t,n])=>{n.editLink&&n.postTitle?e.push((0,g.jsxs)("li",{children:[(0,g.jsx)(r.ExternalLink,{href:n.editLink,children:n.postTitle}),(0,g.jsx)("br",{}),(0,g.jsx)("em",{children:d(t)})]},t)):n.postTitle&&e.push((0,g.jsxs)("li",{children:[n.postTitle,(0,g.jsx)("br",{}),(0,g.jsx)("em",{children:d(t)})]},t))});const t=e=>e.listItems.length?(0,g.jsx)("ul",{children:e.listItems}):(0,g.jsx)("em",{children:(0,c.__)("None","bogo")});return(0,g.jsxs)(r.PanelRow,{children:[(0,g.jsx)("span",{children:(0,c.__)("Translations","bogo")}),(0,g.jsx)(t,{listItems:e})]})},h=()=>{const t=[];return Object.entries(n).forEach(([a,i])=>{i.postId||t.push((0,g.jsxs)("li",{children:[(0,g.jsx)(r.Button,{isDefault:!0,onClick:()=>{(t=>{const a={...n};a[t]={creating:!0},o(a),s()({path:`/bogo/v1/posts/${e.id}/translations/${t}`,method:"POST"}).then(e=>{const s={...n};s[t]={postId:e[t].id,postTitle:e[t].title.raw,editLink:e[t].edit_link,creating:!1},o(s),(0,l.dispatch)("core/notices").createInfoNotice((0,c.__)("Translation post created.","bogo"),{isDismissible:!0,type:"snackbar",speak:!0,actions:[{url:s[t].editLink,label:(0,c.__)("Edit Post","bogo")}]})})})(a)},children:(0,c.sprintf)(/* translators: %s: Language name. */ /* translators: %s: Language name. */
(0,c.__)("Add %s translation","bogo"),d(a))}),i.creating&&(0,g.jsx)(r.Spinner,{})]},a))}),t.length<1||"auto-draft"==e.status?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(r.PanelRow,{children:(0,g.jsx)("ul",{children:t})})};return(0,g.jsxs)(a.PluginDocumentSettingPanel,{name:"bogo-language-panel",title:(0,c.__)("Language","bogo"),className:"bogo-language-panel",children:[(0,g.jsx)(u,{}),(0,g.jsx)(p,{}),(0,g.jsx)(h,{})]})},icon:"translation"}),s().use((e,t)=>{const o=bogo.currentPost.lang;return o&&("string"!=typeof e.url||(0,n.hasQueryArg)(e.url,"lang")||(e.url=(0,n.addQueryArgs)(e.url,{lang:o})),"string"!=typeof e.path||(0,n.hasQueryArg)(e.path,"lang")||(e.path=(0,n.addQueryArgs)(e.path,{lang:o}))),t(e,t)})})();