(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.plugins,n=window.wp.url,o=window.wp.apiFetch;var s=t.n(o);const a=window.wp.editPost,r=window.wp.components,i=window.wp.element,l=window.wp.data,c=window.wp.i18n,d=window.ReactJSXRuntime,u=t=>bogo.availableLanguages[t]?bogo.availableLanguages[t].name:t;(0,e.registerPlugin)("bogo-language-panel",{render:function(){const{currentPost:t,currentLocale:e,postId:n,postStatus:o}=(0,l.useSelect)(t=>{const e=t("core/editor").getCurrentPost(),n=t("core/editor").getEditedPostAttribute("meta");return{currentPost:Object.assign({},e,bogo.currentPost),currentLocale:n?._locale||bogo.currentPost.locale||"",postId:e.id,postStatus:e.status}});if(-1==bogo.localizablePostTypes.indexOf(t.type))return(0,d.jsx)(d.Fragment,{});const[g,p]=(0,i.useState)(t.translations),h=()=>{const t=Object.entries(bogo.availableLanguages).map(([t,e])=>({value:t,label:e.name||t})),s=!n||"auto-draft"===o;return(0,d.jsxs)(r.PanelRow,{children:[(0,d.jsx)("span",{children:(0,c.__)("Language","bogo")}),(0,d.jsx)(r.SelectControl,{value:e,options:t,onChange:t=>{n&&"auto-draft"!==o&&(0,l.dispatch)("core/editor").editPost({meta:{_locale:t}})},disabled:s,__nextHasNoMarginBottom:!0})]})},b=()=>{const t=[];Object.entries(g).forEach(([e,n])=>{n.editLink&&n.postTitle?t.push((0,d.jsxs)("li",{children:[(0,d.jsx)(r.ExternalLink,{href:n.editLink,children:n.postTitle}),(0,d.jsx)("br",{}),(0,d.jsx)("em",{children:u(e)})]},e)):n.postTitle&&t.push((0,d.jsxs)("li",{children:[n.postTitle,(0,d.jsx)("br",{}),(0,d.jsx)("em",{children:u(e)})]},e))});const e=t=>t.listItems.length?(0,d.jsx)("ul",{children:t.listItems}):(0,d.jsx)("em",{children:(0,c.__)("None","bogo")});return(0,d.jsxs)(r.PanelRow,{children:[(0,d.jsx)("span",{children:(0,c.__)("Translations","bogo")}),(0,d.jsx)(e,{listItems:t})]})},j=()=>{const e=[];return Object.entries(g).forEach(([n,o])=>{o.postId||e.push((0,d.jsxs)("li",{children:[(0,d.jsx)(r.Button,{isDefault:!0,onClick:()=>{(e=>{const n={...g};n[e]={creating:!0},p(n),s()({path:`/bogo/v1/posts/${t.id}/translations/${e}`,method:"POST"}).then(t=>{const n={...g};n[e]={postId:t[e].id,postTitle:t[e].title.raw,editLink:t[e].edit_link,creating:!1},p(n),(0,l.dispatch)("core/notices").createInfoNotice((0,c.__)("Translation post created.","bogo"),{isDismissible:!0,type:"snackbar",speak:!0,actions:[{url:n[e].editLink,label:(0,c.__)("Edit Post","bogo")}]})})})(n)},children:(0,c.sprintf)(/* translators: %s: Language name. */ /* translators: %s: Language name. */
(0,c.__)("Add %s translation","bogo"),u(n))}),o.creating&&(0,d.jsx)(r.Spinner,{})]},n))}),e.length<1||"auto-draft"==t.status?(0,d.jsx)(d.Fragment,{}):(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("ul",{children:e})})};return(0,d.jsxs)(a.PluginDocumentSettingPanel,{name:"bogo-language-panel",title:(0,c.__)("Language","bogo"),className:"bogo-language-panel",children:[(0,d.jsx)(h,{}),(0,d.jsx)(b,{}),(0,d.jsx)(j,{})]})},icon:"translation"}),s().use((t,e)=>{const o=bogo.currentPost.lang;return o&&("string"!=typeof t.url||(0,n.hasQueryArg)(t.url,"lang")||(t.url=(0,n.addQueryArgs)(t.url,{lang:o})),"string"!=typeof t.path||(0,n.hasQueryArg)(t.path,"lang")||(t.path=(0,n.addQueryArgs)(t.path,{lang:o}))),e(t,e)})})();