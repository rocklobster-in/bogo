(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.url,s=window.wp.apiFetch;var o=e.n(s);const i=window.wp.editPost,a=window.wp.components,r=window.wp.element,l=window.wp.data,c=window.wp.i18n,d=window.ReactJSXRuntime,g=e=>bogo.availableLanguages[e]?bogo.availableLanguages[e].name:e;(0,t.registerPlugin)("bogo-language-panel",{render:function(){const e=(0,l.useSelect)(e=>Object.assign({},e("core/editor").getCurrentPost(),bogo.currentPost));if(-1==bogo.localizablePostTypes.indexOf(e.type))return(0,d.jsx)(d.Fragment,{});const[t,n]=(0,r.useState)(e.translations),s=()=>(0,d.jsxs)(a.PanelRow,{children:[(0,d.jsx)("span",{children:(0,c.__)("Language","bogo")}),(0,d.jsx)("div",{children:g(e.locale)})]}),u=()=>{const e=[];Object.entries(t).forEach(([t,n])=>{n.editLink&&n.postTitle?e.push((0,d.jsxs)("li",{children:[(0,d.jsx)(a.ExternalLink,{href:n.editLink,children:n.postTitle}),(0,d.jsx)("br",{}),(0,d.jsx)("em",{children:g(t)})]},t)):n.postTitle&&e.push((0,d.jsxs)("li",{children:[n.postTitle,(0,d.jsx)("br",{}),(0,d.jsx)("em",{children:g(t)})]},t))});const n=e=>e.listItems.length?(0,d.jsx)("ul",{children:e.listItems}):(0,d.jsx)("em",{children:(0,c.__)("None","bogo")});return(0,d.jsxs)(a.PanelRow,{children:[(0,d.jsx)("span",{children:(0,c.__)("Translations","bogo")}),(0,d.jsx)(n,{listItems:e})]})},p=()=>{const s=[];return Object.entries(t).forEach(([i,r])=>{r.postId||s.push((0,d.jsxs)("li",{children:[(0,d.jsx)(a.Button,{isDefault:!0,onClick:()=>{(s=>{const i={...t};i[s]={creating:!0},n(i),o()({path:`/bogo/v1/posts/${e.id}/translations/${s}`,method:"POST"}).then(e=>{const o={...t};o[s]={postId:e[s].id,postTitle:e[s].title.raw,editLink:e[s].edit_link,creating:!1},n(o),(0,l.dispatch)("core/notices").createInfoNotice((0,c.__)("Translation post created.","bogo"),{isDismissible:!0,type:"snackbar",speak:!0,actions:[{url:o[s].editLink,label:(0,c.__)("Edit Post","bogo")}]})})})(i)},children:(0,c.sprintf)(/* translators: %s: Language name. */ /* translators: %s: Language name. */
(0,c.__)("Add %s translation","bogo"),g(i))}),r.creating&&(0,d.jsx)(a.Spinner,{})]},i))}),s.length<1||"auto-draft"==e.status?(0,d.jsx)(d.Fragment,{}):(0,d.jsx)(a.PanelRow,{children:(0,d.jsx)("ul",{children:s})})};return(0,d.jsxs)(i.PluginDocumentSettingPanel,{name:"bogo-language-panel",title:(0,c.__)("Language","bogo"),className:"bogo-language-panel",children:[(0,d.jsx)(s,{}),(0,d.jsx)(u,{}),(0,d.jsx)(p,{})]})},icon:"translation"}),o().use((e,t)=>{const s=bogo.currentPost.lang;return s&&("string"!=typeof e.url||(0,n.hasQueryArg)(e.url,"lang")||(e.url=(0,n.addQueryArgs)(e.url,{lang:s})),"string"!=typeof e.path||(0,n.hasQueryArg)(e.path,"lang")||(e.path=(0,n.addQueryArgs)(e.path,{lang:s}))),t(e,t)})})();